<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>GO APPLE â€” Formulario</title>
<style>
  :root{
    --bg:#ffffff; --surface:#ffffff; --line:#e6e6e9; --ink:#1d1d1f; --muted:#6e6e73; --accent:#0071e3; --radius:16px;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; background:linear-gradient(180deg,#f7f8fb, #eef1f6);
    color:var(--ink);
    font-family:-apple-system,BlinkMacSystemFont,"SF Pro Text","SF Pro Display",Segoe UI,Roboto,Helvetica,Arial,sans-serif;
    display:grid; place-items:center;
    padding:18px;
  }

  .card{
    width:min(640px, 94vw);
    background:var(--surface);
    border:1px solid var(--line);
    border-radius:var(--radius);
    box-shadow:0 20px 60px rgba(0,0,0,.10);
    overflow:hidden;
  }
  header{
    padding:20px 22px 0; text-align:center;
  }
  h1{ margin:0; font-size:24px; font-weight:800; }
  p.lead{ margin:8px 0 16px; color:#424245; font-size:15px; }

  .form-body{ padding:18px; display:grid; gap:14px; }
  .row{ display:grid; gap:10px; }
  label{ font-size:13px; color:#424245; font-weight:600; }
  input, select{
    width:100%; padding:12px 14px; border-radius:12px; border:1px solid var(--line);
    background:#fafafa; font-size:14px; outline:none;
  }
  .actions{
    display:flex; gap:10px; justify-content:flex-end; margin-top:4px;
  }
  .btn{
    appearance:none; padding:11px 16px; border-radius:999px; font-weight:700; cursor:pointer;
    border:1px solid #cfd2d8; background:#fff;
  }
  .btn.primary{ background:var(--accent); color:#fff; border-color:var(--accent); }
  .btn:hover{ filter:brightness(.98); }
  .hidden{ display:none !important; }

  footer.note{ padding:0 18px 18px; color:var(--muted); font-size:12.5px; text-align:center; }
</style>
</head>
<body>

<main class="card" role="dialog" aria-modal="true" aria-labelledby="form-title">
  <header>
    <h1 id="form-title">Antes de ver los modelos ðŸ‘‹</h1>
    <p class="lead">Dejanos tus datos asÃ­ te ayudamos a elegir mejor.</p>
  </header>

  <section class="form-body">
    <!-- Paso 1 -->
    <div id="step1" class="row">
      <div>
        <label for="lf-name">Nombre</label>
        <input id="lf-name" type="text" placeholder="Tu nombre" autocomplete="name" />
      </div>
      <div>
        <label for="lf-email">Correo</label>
        <input id="lf-email" type="email" placeholder="tu@email.com" autocomplete="email" />
      </div>
      <div>
        <label for="lf-phone">WhatsApp</label>
        <input id="lf-phone" type="tel" placeholder="+54 9 ..." inputmode="tel" autocomplete="tel" />
      </div>
      <div class="actions">
        <button class="btn" id="cancel">Cancelar</button>
        <button class="btn primary" id="next">Continuar</button>
      </div>
    </div>

    <!-- Paso 2 -->
    <div id="step2" class="row hidden">
      <div>
        <label for="lf-budget">Â¿CuÃ¡l es tu presupuesto (ARS)?</label>
        <input id="lf-budget" type="number" min="0" step="1000" placeholder="Ej: 500000" />
      </div>
      <div class="actions">
        <button class="btn" id="back">Volver</button>
        <button class="btn primary" id="send">Enviar</button>
      </div>
    </div>
  </section>

  <footer class="note">
    Completar el formulario mejora tus recomendaciones y tiempos de respuesta.
  </footer>
</main>

<script>
(function(){
  const KEY = 'lead_form_done_v1';
  const $s1  = document.getElementById('step1');
  const $s2  = document.getElementById('step2');
  const $name= document.getElementById('lf-name');
  const $mail= document.getElementById('lf-email');
  const $tel = document.getElementById('lf-phone');
  const $bud = document.getElementById('lf-budget');

  // Validaciones bÃ¡sicas
  function emailOk(v){ return /^[^@\s]+@[^@\s]+\.[^@\s]+$/.test((v||'').trim()); }
  function requiredFilled(){
    return ($name.value||'').trim() && emailOk($mail.value) && ($tel.value||'').trim();
  }

  // NavegaciÃ³n
  document.getElementById('next').onclick = ()=>{
    if(!requiredFilled()){
      alert('CompletÃ¡ nombre, correo y WhatsApp vÃ¡lidos.'); return;
    }
    $s1.classList.add('hidden'); $s2.classList.remove('hidden'); $bud.focus();
  };
  document.getElementById('back').onclick   = ()=>{ $s2.classList.add('hidden'); $s1.classList.remove('hidden'); };
  document.getElementById('cancel').onclick = ()=>{ history.back(); };

  // Enviar â†’ agrega params a la URL (reemplaza el querystring actual)
  document.getElementById('send').onclick = ()=>{
    const budget = ($bud.value||'').trim();
    const params = new URLSearchParams(location.search);
    params.set('name',  ($name.value||'').trim());
    params.set('email', ($mail.value||'').trim());
    params.set('phone', ($tel.value||'').trim());
    if(budget) params.set('budget_ars', budget);

    const newUrl = location.pathname + '?' + params.toString();
    history.replaceState({}, '', newUrl);
    sessionStorage.setItem(KEY, '1');

    // Si tu pÃ¡gina ya tiene Pixel cargado, dispara Lead
    try{ if(window.fbq){ fbq('track','Lead', { value: budget? Number(budget):0, currency:'ARS' }); } }catch(_){}

    alert('Â¡Gracias! Tus datos fueron guardados.');
  };
})();
</script>
</body>
</html>
